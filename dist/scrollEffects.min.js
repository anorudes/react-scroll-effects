"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{"default":e}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(e.__proto__=t)}Object.defineProperty(exports,"__esModule",{value:!0});var _arguments2=arguments,_createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),_get=function(e,t,n){for(var i=!0;i;){var r=e,a=t,o=n;s=u=l=void 0,i=!1,null===r&&(r=Function.prototype);var s=Object.getOwnPropertyDescriptor(r,a);if(void 0!==s){if("value"in s)return s.value;var l=s.get;return void 0===l?void 0:l.call(o)}var u=Object.getPrototypeOf(r);if(null===u)return void 0;e=u,t=a,n=o,i=!0}},_reactAddons=require("react/addons"),_reactAddons2=_interopRequireDefault(_reactAddons),ScrollEffect=function(e){function t(){_classCallCheck(this,t),_get(Object.getPrototypeOf(t.prototype),"constructor",this).call(this),this.state={animated:!1},window.addEventListener("scroll",throttle(200,this.handleScroll.bind(this)))}return _inherits(t,e),_createClass(t,[{key:"componentWillUnmount",value:function(){window.removeEventListener("scroll",this.handleScroll.bind(this))}},{key:"singleAnimate",value:function(){var e=this;this.setState({animated:!0}),setTimeout(function(){e.props.callback()},1e3*this.props.duration)}},{key:"queueAnimate",value:function(){var e=this,t=_reactAddons2["default"].findDOMNode(this),n=function(t){return t.className===e.props.queueClass},i=0,r=function(t){t.style.visibility="hidden",setTimeout(function(){t.style.visibility="visible",t.className=t.className+" animated "+e.props.animate},1e3*i*e.props.queueDuration),i++},a=function o(e){Array.prototype.forEach.call(e.childNodes,function(e){o(e),n(e)&&r(e)})};a(t),setTimeout(function(){e.props.callback()},1e3*this.props.duration*i)}},{key:"handleScroll",value:function(e){if(!this.state.animated){var t=_reactAddons2["default"].findDOMNode(this),n=t.getBoundingClientRect().top+document.body.scrollTop,i=window.scrollY,r=window.innerHeight;i+r/2>=n+1*this.props.offset&&(this.setState({animated:!0}),""==this.props.queueClass&&this.singleAnimate(),""!==this.props.queueClass&&this.queueAnimate())}}},{key:"render",value:function(){var e=this.props,t=this.state,n=_reactAddons2["default"].addons.classSet,i=n(_defineProperty({animated:!0},e.animate,t.animated&&""===e.queueClass));i+=" "+e.className;var r=t.animated?{}:{visibility:"hidden"};return""!==e.duration&&(r.WebkitAnimationDuration=e.duration+"s",r.animationDuration=e.duration+"s"),_reactAddons2["default"].createElement("div",{className:i,style:r},e.children)}}]),t}(_reactAddons2["default"].Component);exports["default"]=ScrollEffect,ScrollEffect.defaultProps={animate:"fadeInUp",offset:0,className:"",duration:1,queueDuration:1,queueClass:"",callback:function(){}};var throttle=function(e,t){var n=(new Date).getTime();return function(){var i=(new Date).getTime();i-n>=e&&(n=i,t.apply(null,_arguments2))}};module.exports=exports["default"];